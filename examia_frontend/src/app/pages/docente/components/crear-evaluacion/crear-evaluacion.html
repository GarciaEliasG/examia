<main class="wrap">
  <div class="divider"></div>

  <main class="container">
    <a class="back" routerLink="/docente/evaluaciones" aria-label="Volver">
      <svg viewBox="0 0 24 24"><path d="M14 7l-5 5 5 5V7z"/></svg>
    </a>

    <h1 class="title">{{ isEditMode ? 'Editar Evaluación' : 'Crear Evaluación' }}</h1>

    <div class="alerts" id="alert-container">
      <div *ngFor="let alert of alerts" 
           class="alert" 
           [ngClass]="alert.type" 
           (click)="closeAlert(alert.id)">
        {{ alert.message }}
      </div>
    </div>

    <section class="form-card">
      <div class="field-grid">
        <div class="field">
          <label for="titulo">Título de la evaluación</label>
          <input type="text" id="titulo" placeholder="Ej. Evaluación Unidad 1" [(ngModel)]="evaluacion.titulo">
        </div>
        <div class="field">
          <label for="fecha">Fecha</label>
          <input type="date" id="fecha" [(ngModel)]="evaluacion.fecha">
        </div>
        <div class="field">
          <label for="hora">Hora</label>
          <input type="time" id="hora" [(ngModel)]="evaluacion.hora">
        </div>
      </div>
      <div class="field">
        <label for="descripcion">Descripción / Pautas</label>
        <textarea id="descripcion" rows="3" placeholder="Detallá las instrucciones, pautas de entrega..." [(ngModel)]="evaluacion.desc"></textarea>
      </div>
    </section>

    <section class="form-card">
      <header class="card-header">
        <h2>Preguntas</h2>
        <span class="badge">{{ evaluacion.preguntas.length }}</span>
      </header>
      
      <div id="preguntas-list" class="chip-list">
        <p *ngIf="evaluacion.preguntas.length === 0" class="muted">
          Aún no has agregado preguntas.
        </p>
        
        <span *ngFor="let p of evaluacion.preguntas" class="chip">
          {{ p.texto }}
          <button class="chip__del" (click)="removerPregunta(p.id)" title="Remover">✕</button>
        </span>
      </div>
      
      <button class="btn primary chip-btn--small" (click)="irACargarPreguntas()">
        <span class="plus">+</span> Agregar preguntas
      </button>
    </section>

    <footer class="actions">
      <button typeNext="button" class="btn" (click)="cancelar()">Cancelar</button>
      <button type="button" class="btn primary" (click)="guardarEvaluacion()">
        {{ isEditMode ? 'Actualizar Evaluación' : 'Guardar Evaluación' }}
      </button>
    </footer>
  </main>
</main>