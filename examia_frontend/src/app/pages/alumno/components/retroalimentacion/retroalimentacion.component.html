<header class="topbar">
  <div class="brand">
    <img src="assets/images/logo.png" alt="Logo Examia" class="logo">
  </div>
</header>

<main class="wrap">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <p>🔄 Cargando retroalimentación...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error">
    <p>❌ {{ error }}</p>
    <button class="btn primary" (click)="loadFeedbacks()">Reintentar</button>
  </div>

  <!-- Success State -->
  <div *ngIf="!isLoading && !error">
    <div class="header-row">
      <button class="icon-btn back" aria-label="Volver a Resultado" (click)="volver()">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M14 7l-5 5 5 5V7z"/>
        </svg>
      </button>
      <h1 class="title">Comentarios: {{ examenTitulo }}</h1>
    </div>

    <section class="feedback-list">
      <div *ngFor="let feedback of feedbacks" 
           [class]="getCardClass(feedback.scoreType)">
        
        <div class="feedback-header">
          <h3>{{ feedback.pregunta }}</h3>
          <span class="score-badge {{ feedback.scoreType }}">
            {{ getScoreText(feedback.scoreType, feedback.puntajeObtenido, feedback.puntajeMaximo) }}
          </span>
        </div>

        <p class="your-answer">
          <strong>Tu respuesta:</strong> {{ feedback.userAnswer }}
        </p>
        
        <div class="teacher-comment">
          <h4>Comentario del Docente:</h4>
          <p>{{ feedback.teacherComment }}</p>
        </div>
      </div>

      <!-- Estado vacío -->
      <div *ngIf="feedbacks.length === 0" class="empty-state">
        <p>No hay retroalimentación disponible para este examen.</p>
        <button class="btn ghost" (click)="volver()">Volver al resultado</button>
      </div>
    </section>
  </div>
</main>